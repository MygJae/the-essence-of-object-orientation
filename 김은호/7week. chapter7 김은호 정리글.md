### 날짜 : 2023-06-04
### 주제 : 7week. chapter7 김은호 정리글


#### 객체지향 설계의 3가지 관점(P207)
1. 개념 관점
  * 사용자가 도메인을 바라보는 관점을 말합니다. 
  * 실제 도메인 규칙과 제약을 최대한 유사하게 반영하는 것이 핵심입니다. 
2. 명세 관점
  * 개발자의 관점에서 소프트웨어 안에 객체들의 책임에 초점을 맞춘 관점을 말합니다. 
3. 구현 관점
  * 객체들이 책임을 수행하는데 필요한 동작에 대한 코드를 작성하는 것에 초점을 맞춘 관점입니다. 

#### 커피 전문점 도메인(P209)
<img style="width:100%" src="https://github.com/techbook-study/the-essence-of-object-orientation/assets/53805469/b40b72a9-8fcb-463b-b60b-f986e6dca466"  />
* 객체 지향의 관점에서 커피 전문점이라는 도메인은 손님 객체, 메뉴 항목 객체, 메뉴판 객체, 바리스타 객체, 커피 객체 입니다. 

<img style="width:50%" src="https://github.com/techbook-study/the-essence-of-object-orientation/assets/53805469/cce624b8-8001-4943-aaf9-e272e65635a7" />
* 다음은 타입간의 어떤 관계를 가지고 있는지를 보여주는 도메인 모델입니다. 
* 먼저 **메뉴판** 타입에서 **메뉴 항목** 타입쪽으로 향하는 선에 그려진 속이 찬 **마름모**는 **포함관계** 또는 **합성 관계**를 나타낸 것으로, **메뉴 항목**이 **메뉴판**에 포함된다는 것을 말합니다.
* 현재는 메뉴판에 4개의 메뉴 항목을 가지고 있다는 의미로 해석하시면 됩니다.
* 그리고 각각 **메뉴판**, **바리스타**, **커피**의 연결은 한타입의 인스턴스가 다른 인스턴스를 포함하지 않지만 서로 알고 있어야 함으로 **연관 관계**라고 표현 합니다.

#### 설계하고 구현하기(P214)
<img style="width:100%" src="https://github.com/techbook-study/the-essence-of-object-orientation/assets/53805469/6fd85140-bc8b-4c75-908d-f87b6336c3be" />
* 위의 도메인 설계를 토대로 협력을 설계한 것입니다.
* 협력을 설계 할 때는 **메시지를 먼저 선택**하고 **그 후에 메시지를 수신하기에 적절한 객체**를 선택해야 합니다.
* 첫번째 메시지는 **커피를 주문하라** 일 것이고, 메시지 위의 정보는 부가적인 정보 인자를 의미합니다. 
* **커피를 주문하라**는 메시지를 수신할 객체는 **손님**이 됩니다. **손님** 객체는 커피를 주문할 책임을 할당받았습니다. 
* 다음은 **손님**이 메뉴를 확인하기 위해 **메뉴 항목을 찾아라**는 메시지를 보내게 되는데 이 메시지를 수행할 객체는 **메뉴판**이 됩니다. 
* **메뉴판** 객체는 **메뉴 항목**을 **손님** 객체에게 응답합니다. 
* 다음 **커피를 제조하라**는 메시지를 **바리스타** 객체에게 전달하고 **바리스타** 객체는 그 응답을 토대로 **커피** 객체에게 **커피를 생성하라**는 메시지를 전달합니다. 
* 이후 커피가 만들어지면 **바리스타 객체**는 **커피**를 **손님 객체**에게 응답합니다.

```java
class Customer{
	public void order(String menuName){
	}
}

>>>>> 변경 후

class Customer{

	public void order(String menuName, Menu menu, Barista barista){
		MenuItem menuItem = menu.choose(menuName);
		Coffee coffee = barista.makeCoffe(menuItem);
	}
}
```
* 위의 명세를 토대로 구현한 소스의 내용입니다.
* 첫 Customer 객체는 **커피를 주문하라**는 메시지를 수행하기 위해 단순히 Menu 객체와 상호 작용하기 위한 MenuName만을 가지고 있습니다. 
* 하지만 실제로는 Customer 객체는 커피를 주문을 위해 Menu 객체와 Barista 객체를 알고 있어야 합니다. 
* 그래서 Customer 객체는 Menu와 Barista 객체의 참조를 알고 이를 구현합니다.
* 여기서 주의할 점은 처음에 만들어진 인터페이스가 실제 구현 단계에서 변화된다는 것입니다. 
* 다른 객체의 구현 코드도 많지만 이하의 코드들 또한 구현 단계에서 변화를 거친다는 점에 있어 같다는 생각이 들어 생략했습니다.

#### 코드와 세가지 관점
* 휼륭한 객체지향 프로그램은 하나의 클래스 안에 개념,명세,구현 관점을 모두 포함한 프로그램이라 할 수 있습니다.
* 만약 다른 사람들이 자신의 코드를 보고서도 위의 3가지 관점을 확인할 수 없다면 코드를 구현한 사람은 위의 3가지 관점을 토대로 코드를 개선하는 작업이 필요합니다. 
* 또한 좋은 객체 지향 프로그램을 만들기 위해 인터페이스와 구현의 구분을 최대한 명확히 하는 것이 중요합니다. 


### 느낀점
* 도메인 설계는 객체 간의 연관 관계를 간단히 파악하기 위한 설계입니다. 
* 하지만 도메인 설계 만으로는 명세와 구현을 명확히 할 수 없고, 도메인 설계 당시 모호한 부분이 생길 수도 있습니다. 
* 결국 설계의 한계는 최대한 빠른 구현을 통해 객체 간의 협력 관계를 파악하고 객체의 책임을 필요한 객체에 구현하는 것이 필요합니다. 
* 이 과정의 반복을 통해 구현된 소스만 으로도 개념, 명세, 구현 관점에서 이해할 수 있는 좋은 코드를 만들 수 있습니다.
* 이번 장을 읽으며 가장 인상에 남는 것은 위의 내용입니다.
* 최근 DDD(Domain Driven Design)를 배우며 도메인 설계가 완벽해야 옳바른 구현을 할 수 있을 것이라 생각했습니다.
* 하지만 도메인 설계에 생각보다 많은 시간을 들였지만 완벽한 구현을 하지 못했습니다. 왜냐냐하면 설계의 내용만으로는 객체의 협력 관계를 소스로 구현하기에 부족했기 때문입니다. 
* 그래서 이후엔 최대한 빠르게 구현을 하고 토이 프로젝트 구성원들과의 대화를 통해 어떤 부분을 개선하고 프로세스를 어떻게 할 지에 대한 고민을 하며 내용들을 수정해나갔습니다.
* 물론 아직 구현중인 단계라.. 정리가 좀 필요하지만 그래도 개략적인 설계를 통한 객체들의 협력 관계를 파악하고 최대한 빠른 구현을 통한 설계, 소스의 수정은 소스를 좀더 객체 지향적으로 만들 수 있겠다는 생각을 하게 했습니다.
* 이런 생각을 할 수 있었던 것은 혼자 생각할 때보다 만든 것을 나누고 정리하는 과정속에서 좀 더 객체 지향적인 협력 관계는 무엇 일지를 고민할 수 있었기 때문입니다.
* 앞으로의 과정에서도 좀 더 분발하여 협력을 최대한 빠르게 정의하고 명세와 구현을 할 수 있도록 노력해야겠습니다.

### 의문, 고민, 같이 이야기하고 싶은 부분
* 객체 지향의 사실과 오해를 통해 얻어가는 부분은 무엇인가요?